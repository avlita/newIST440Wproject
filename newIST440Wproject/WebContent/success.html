<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Google Vision</title>
	 <link href="css/drag.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
   
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDczTU0kifrO1EGlDs6-PSvcCXs3kDQ00c",
        authDomain: "ist440w-project.firebaseapp.com",
        databaseURL: "https://ist440w-project.firebaseio.com",
        projectId: "ist440w-project",
        storageBucket: "ist440w-project.appspot.com",
        messagingSenderId: "759127897446"
      };
      firebase.initializeApp(config);
    </script>
     <script src="js/vision.js"></script>
     
     <script src="https://apis.google.com/js/api.js"></script>
  <script>
 // function loadClient() {
  //  gapi.client.setApiKey("AIzaSyB0NeE-V16VSM5JQ7AQD9AAlnTEZEowFdA");
  //  return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/vision/v1/rest")
 //       .then(function() { console.log("GAPI client loaded for API"); },
  //            function(err) { console.error("Error loading GAPI client for API", err); });
 // }
  // Make sure the client is loaded before calling this method.
  //function execute(image) {
   // return gapi.client.vision.images.annotate({
   //   "resource": {
   // 	  "requests": [
   // 		    {
   // 		      "image": {
    //		        "content": image
    //		      },
    //		      "features": [
    //		        {
  //  		          "type": "TEXT_DETECTION"
  //  		        }
   // 		      ]
    //		    }
    //		  ]	  
     // }
   // })
     //   .then(function(response) {
       //         // Handle the results here (response.result has the parsed body).
         //       console.log("Response", response);
           //   },
             // function(err) { console.error("Execute error", err); });
  //}
 // gapi.load("client");
</script>   
     
    <script type="text/javascript">
      initApp = function() {
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var uid = user.uid;
            var phoneNumber = user.phoneNumber;
            var providerData = user.providerData;
            user.getIdToken().then(function(accessToken) {
            
            });
          } else {
            // User is signed out.
           
          }
        }, function(error) {
          console.log(error);
        });
      };

      window.addEventListener('load', function() {
        initApp()
      });
    </script>
  </head>
  <body>
    <h1>Google vision. Please upload image here</h1>
   		<form class="box" method="post" action="" enctype="multipart/form-data">
  <div class="box__input">
    <input class="box__file" type="file" name="files[]" id="file" data-multiple-caption="{count} files selected" multiple onclick="loadClient()"/>
    <label for="file"><strong>Choose a file</strong><span class="box__dragndrop"> or drag it here</span>.</label>
    <button class="box__button" type="submit" onclick="execute('js/menu34.jpg')">Upload</button>
  </div>
  <div class="box__uploading">Uploading&hellip;</div>
  <div class="box__success">Done!</div>
  <div class="box__error">Error! <span></span>.</div>
</form>
  </body>
</html> 
